{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "govuk/components/error-summary/macro.njk" import govukErrorSummary %}

{% extends "template.njk" %}

{% block content %}
  {{ govukBackLink({
    text: "Back to task",
    href: "/tasks/" + task.id
  }) }}

  {% if error %}
    {{ govukErrorSummary({
      titleText: error.title,
      descriptionText: error.message
    }) }}
  {% endif %}

  <h1 class="govuk-heading-xl">Delete task</h1>

  {{ govukWarningText({
    text: "This action cannot be undone.",
    iconFallbackText: "Warning"
  }) }}

  <p class="govuk-body">Are you sure you want to delete this task?</p>

  {# Show task details so user knows what they're deleting #}
  {{ govukSummaryList({
    rows: [
      {
        key: {
          text: "Title"
        },
        value: {
          text: task.title
        }
      },
      {
        key: {
          text: "Status"
        },
        value: {
          text: task.statusDisplayValue
        }
      },
      {
        key: {
          text: "Due date"
        },
        value: {
          text: task.dueDateFormatted
        }
      }
    ]
  }) }}

  <form method="post" action="/tasks/{{ task.id }}/delete">
    <input type="hidden" name="_csrf" value="{{ csrfToken }}">
    <div class="govuk-button-group">
      {{ govukButton({
        text: "Delete task",
        classes: "govuk-button--warning",
        preventDoubleClick: true
      }) }}

      <a href="/tasks/{{ task.id }}" class="govuk-link">Cancel</a>
    </div>
  </form>
{% endblock %}
